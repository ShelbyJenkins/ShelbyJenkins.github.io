<button
	id="theme-toggle"
	class="sm:right-[2svw] sm:top-[1svh] sm:w-[16svw] md:right-[3svw] md:top-[3svh] md:w-[7svw] lg:w-[5svw]"
>
	<svg viewBox="0 0 512 256" shape-rendering="geometricPrecision">
		<svg id="sun" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd">
			<g id="sun-inner">
				<circle cx="128" cy="128" r="116"></circle>
				<rect fill-opacity=".5" height="220" rx="107" ry="107" width="361" x="149" y="17"></rect>
			</g>
			<path
				d="m129.02,0l0.18,0c22.03,0 42.83,5.66 61,15.6l210.38,0c30.89,0 59,12.65 79.38,33.04c20.39,20.35 33.04,48.46 33.04,79.38c0,30.92 -12.66,59.03 -33.02,79.4l-0.42,0.38c-20.34,20.15 -48.29,32.64 -78.98,32.64l-210.34,0c-18.17,9.93 -38.98,15.6 -61.04,15.6l-0.18,0c-35.2,0 -67.22,-14.41 -90.42,-37.6c-23.19,-23.19 -37.6,-55.2 -37.6,-90.42s14.4,-67.24 37.59,-90.43l0.91,-0.83c23.15,-22.71 54.79,-36.76 89.52,-36.76zm-5.95,54.42c0,-1.95 0.8,-3.73 2.08,-5c2.74,-2.77 7.27,-2.76 10.02,-0.01l0.14,0.16a7.04,7.04 0 0 1 1.94,4.85l0,12.95c0,1.95 -0.8,3.73 -2.08,5.01c-2.75,2.75 -7.27,2.75 -10.02,0a7.08,7.08 0 0 1 -2.08,-5.01l0,-12.95zm6.05,31.17c11.72,0 22.32,4.75 30,12.43c7.67,7.68 12.43,18.29 12.43,30c0,11.72 -4.75,22.32 -12.43,30s-18.28,12.43 -30,12.43c-11.72,0 -22.32,-4.75 -30.01,-12.43c-7.67,-7.68 -12.43,-18.28 -12.43,-30c0,-11.72 4.76,-22.32 12.43,-30c7.69,-7.67 18.3,-12.43 30.01,-12.43zm-56.33,-5.34a7.11,7.11 0 0 1 -2.07,-5.01c0,-3.9 3.18,-7.09 7.09,-7.09c1.81,0 3.62,0.69 5,2.07l9.16,9.16a7.07,7.07 0 0 1 2.08,5.01c0,1.8 -0.7,3.62 -2.08,5.01a7.06,7.06 0 0 1 -5.01,2.08c-1.8,0 -3.61,-0.7 -5,-2.07l-9.17,-9.16zm-17.28,53.81c-1.95,0 -3.73,-0.8 -5,-2.08c-2.77,-2.74 -2.76,-7.27 -0.01,-10.01l0.15,-0.14a7.04,7.04 0 0 1 4.86,-1.94l12.94,0a7.08,7.08 0 0 1 7.09,7.09c0,1.95 -0.8,3.73 -2.07,5.01a7.1,7.1 0 0 1 -5.02,2.07l-12.94,0zm25.82,50.28a7.05,7.05 0 0 1 -5,2.07c-3.91,0 -7.09,-3.16 -7.09,-7.08c0,-1.81 0.68,-3.62 2.07,-5.01l9.31,-9.29a7.02,7.02 0 0 1 4.86,-1.94a7.09,7.09 0 0 1 7.09,7.09c0,1.79 -0.69,3.6 -2.08,4.99l-9.16,9.17zm53.82,17.29c0,1.94 -0.8,3.73 -2.08,5c-2.74,2.76 -7.27,2.75 -10.02,0l-0.13,-0.15a7.03,7.03 0 0 1 -1.94,-4.85l0,-12.95c0,-1.96 0.8,-3.73 2.07,-5.01c2.76,-2.75 7.27,-2.75 10.03,0a7.1,7.1 0 0 1 2.07,5.01l0,12.95zm50.28,-25.83a7.05,7.05 0 0 1 2.07,5.01c0,3.89 -3.18,7.09 -7.08,7.09c-1.81,0 -3.63,-0.69 -5.01,-2.07l-9.16,-9.16a7.09,7.09 0 0 1 -2.07,-5.02c0,-3.9 3.18,-7.09 7.08,-7.09c1.8,0 3.61,0.7 5,2.08l9.17,9.16zm17.29,-53.82c1.93,0 3.73,0.81 5,2.08c2.76,2.75 2.75,7.27 0,10.02l-0.15,0.14a7.1,7.1 0 0 1 -4.85,1.94l-12.95,0c-1.96,0 -3.74,-0.8 -5.01,-2.08c-2.76,-2.75 -2.76,-7.27 0,-10.02a7.05,7.05 0 0 1 5.01,-2.08l12.95,0zm-25.83,-50.28a7.07,7.07 0 0 1 5,-2.07c3.9,0 7.1,3.19 7.1,7.09c0,1.81 -0.69,3.62 -2.07,5l-9.32,9.31a7.12,7.12 0 0 1 -4.86,1.93c-3.91,0 -7.09,-3.18 -7.09,-7.09c0,-1.8 0.7,-3.61 2.08,-5l9.16,-9.17zm34.17,-41.87c2.96,2.47 5.81,5.07 8.53,7.8c23.22,23.15 37.63,55.17 37.63,90.39s-14.42,67.23 -37.6,90.42a130.2,130.2 0 0 1 -8.5,7.77l189.46,0c26.83,0 51.24,-10.91 69.02,-28.5l0.32,-0.35c17.79,-17.79 28.85,-42.35 28.85,-69.34c0,-26.99 -11.06,-51.55 -28.85,-69.35c-17.77,-17.8 -42.33,-28.84 -69.34,-28.84l-189.52,0zm-82.04,-14.71l0.18,0c62.09,0 112.89,50.81 112.89,112.9c0,62.1 -50.86,112.9 -112.89,112.9l-0.18,0c-62.03,0 -112.9,-50.8 -112.9,-112.9c0,-62.09 50.81,-112.9 112.9,-112.9z"
				id="sun-frame"></path>
		</svg>

		<svg id="moon" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" fill-rule="evenodd">
			<ellipse id="moon-inner" cx="379.78" cy="127.86" rx="124" ry="120"></ellipse>

			<path
				d="m316.54,17l-205.1,0c-30.38,0 -57.99,12.06 -78,31.46c-20.02,19.4 -32.44,46.18 -32.44,75.63c0,29.45 12.42,56.23 32.44,75.62c20.01,19.41 47.62,31.46 78,31.46l192.5,0c21.46,14.9 47.71,23.7 75.96,23.7l0.18,0c36,0 68.75,-14.28 92.47,-37.28c23.71,-23 38.45,-54.74 38.45,-89.65c0,-34.9 -14.72,-66.66 -38.48,-89.62c-23.75,-23.02 -56.48,-37.31 -92.44,-37.31l-0.18,0c-22.93,0 -44.55,5.81 -63.36,15.98l0,0.02zm70.34,93.84l0.43,0.09c0.82,-3.33 2.82,-5.98 6.02,-7.88c3.19,-1.9 6.5,-2.48 9.97,-1.69l0.1,-0.42c-3.46,-0.79 -6.18,-2.74 -8.14,-5.82c-1.97,-3.12 -2.56,-6.33 -1.74,-9.66l-0.43,-0.1c-0.82,3.35 -2.82,5.99 -6.01,7.9c-3.2,1.9 -6.52,2.47 -9.98,1.68l-0.1,0.42c3.46,0.79 6.18,2.75 8.15,5.83c1.98,3.09 2.55,6.3 1.73,9.65zm36.73,16.2l0.53,0.12c1.02,-4.2 3.54,-7.51 7.55,-9.91c4,-2.4 8.17,-3.12 12.51,-2.11l0.13,-0.52c-4.33,-1 -7.75,-3.43 -10.22,-7.33c-2.48,-3.89 -3.21,-7.94 -2.19,-12.12l-0.53,-0.12c-1.02,4.2 -3.54,7.5 -7.55,9.91c-4,2.4 -8.18,3.12 -12.51,2.11l-0.13,0.52c4.34,1 7.75,3.43 10.22,7.32c2.48,3.88 3.21,7.94 2.19,12.13zm-38.64,-58.93c-15.63,7.4 -26.87,22.46 -28.18,40.49c-1.95,26.92 18.98,50.27 46.74,52.18c13.18,0.9 25.54,-3.2 35.08,-10.65c4.73,-3.69 9.62,-0.44 7.56,4.21c-11.29,25.52 -38.3,42.52 -68.47,40.47c-38.14,-2.6 -66.88,-34.68 -64.2,-71.66c2.56,-35.43 33.19,-62.61 69.44,-62.29c6.68,0.06 8.1,4.35 2.03,7.22l0,0.01l0,0.01zm-5.07,-52.11l0.18,0c63.5,0 115.46,50.36 115.46,111.93c0,61.56 -52.03,111.94 -115.46,111.94l-0.18,0c-63.43,0 -115.46,-50.37 -115.46,-111.94s51.96,-111.93 115.46,-111.93z"
				id="moon-frame"
				fill-opacity=".6"></path>

			<ellipse
				cx="380.3"
				cy="128"
				rx="123.5"
				ry="119.8"
				fill-opacity="0"
				id="moon-inner-stroke"
				stroke-width="16.5"
				stroke-opacity=".5"></ellipse>
		</svg>
	</svg>
</button>
<style>
	#theme-toggle {
		position: fixed;
		height: auto;
		z-index: 1;
		border-radius: 1rem;
		transition:
			scale 300ms,
			filter 300ms,
			backdrop-filter 300ms,
			opacity 100ms;
		cursor: pointer;
	}
	#sun {
		opacity: 1;
	}
	:root:is(.dark) #sun {
		opacity: 0;
	}
	#sun-frame {
		fill: oklch(var(--colors-primary-800) / 1);
		filter: grayscale(0.77);
	}
	#sun-inner {
		fill: oklch(var(--colors-primary-50) / 1);
		filter: grayscale(0.77);
	}
	#moon {
		opacity: 0;
	}
	:root:is(.dark) #moon {
		opacity: 1;
	}
	#moon-frame {
		fill: oklch(var(--colors-primary-50) / 1);
		filter: grayscale(0.77);
	}
	#moon-inner {
		fill: oklch(var(--colors-primary-900) / 1);
		filter: grayscale(0.77);
	}
	#moon-inner-stroke {
		stroke: oklch(var(--colors-secondary-50) / 1);
		filter: grayscale(0.77);
	}
	#theme-toggle:hover {
		filter: saturate(1.25);
		scale: 1.05;
	}
	#theme-toggle:active {
		filter: saturate(1.5);
		scale: 0.77;
		transition-duration: 100ms;
		transition-delay: 50ms;
	}
	@media (scripting: none) {
		#theme-toggle {
			display: none;
		}
	}
</style>
<script is:inline>
	const getTheme = () => {
		if (typeof localStorage !== 'undefined') {
			const storedTheme = localStorage.getItem('theme');
			if (storedTheme) {
				return storedTheme;
			}
		}
		if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
			return 'dark';
		}
		return 'light';
	};
	function applyTheme(toggle = false) {
		let theme = getTheme();
		if (toggle) {
			theme = theme === 'dark' ? 'light' : 'dark';
		}
		localStorage.setItem('theme', theme);
		if (theme === 'light') {
			if (document.documentElement.classList.contains('dark')) {
				document.documentElement.classList.remove('dark');
			}
		} else {
			document.documentElement.classList.add('dark');
		}
	}

	const themeToggle = document.getElementById('theme-toggle');
	if (!themeToggle) {
		throw new Error('Theme toggle button not found');
	}
	themeToggle.addEventListener('click', () => applyTheme(true));
	applyTheme();
</script>
