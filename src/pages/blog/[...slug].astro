---
import { type CollectionEntry, getCollection } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';
import '../../styles/blog.css'


export async function getStaticPaths() {
    const posts = await getCollection('blog');

    // Map each post to a promise
    const pathsPromises = posts.map((post) => {
        const filename = post.slug.split('/').pop();
        return {
            params: { slug: filename },
            props: post,
        };
    });

    // Wait for all promises to resolve
    const paths = await Promise.all(pathsPromises);

    return paths;
}

type Props = CollectionEntry<'blog'>;
const post = Astro.props;
const { Content } = await post.render();

---

<BlogPost {...post.data} body={post.body}>
	<Content />
</BlogPost>
